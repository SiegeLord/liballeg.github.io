<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
><head
  ><title
    >Getting started guide</title
    ><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"
     /><meta name="generator" content="pandoc"
     /><script type="text/javascript" src="autosuggest.js"></script>
<script type="text/javascript" src="search_index.js"></script>
<link rel="stylesheet" href="pandoc.css" type="text/css" media="all" />
</head
  ><body
  ><table class="white">
<tr>
<td valign="top" class="sidebar">

<div class="sidebar">
<ul
><li
  ><strong
    ><a href="index.html"
      >Contents</a
      ></strong
    ></li
  ><li
  ><a href="config.html"
    >Configuration files</a
    ></li
  ><li
  ><a href="display.html"
    >Display</a
    ></li
  ><li
  ><a href="events.html"
    >Events</a
    ></li
  ><li
  ><a href="file.html"
    >File I/O</a
    ></li
  ><li
  ><a href="fshook.html"
    >Filesystem hooks</a
    ></li
  ><li
  ><a href="graphics.html"
    >Graphics</a
    ></li
  ><li
  ><a href="joystick.html"
    >Joystick</a
    ></li
  ><li
  ><a href="keyboard.html"
    >Keyboard</a
    ></li
  ><li
  ><a href="memory.html"
    >Memory</a
    ></li
  ><li
  ><a href="misc.html"
    >Miscellaneous</a
    ></li
  ><li
  ><a href="mouse.html"
    >Mouse</a
    ></li
  ><li
  ><a href="opengl.html"
    >OpenGL</a
    ></li
  ><li
  ><a href="path.html"
    >Path</a
    ></li
  ><li
  ><a href="platform.html"
    >Platform-specific</a
    ></li
  ><li
  ><a href="state.html"
    >State</a
    ></li
  ><li
  ><a href="system.html"
    >System</a
    ></li
  ><li
  ><a href="threads.html"
    >Threads</a
    ></li
  ><li
  ><a href="time.html"
    >Time</a
    ></li
  ><li
  ><a href="timer.html"
    >Timer</a
    ></li
  ><li
  ><a href="utf8.html"
    >UTF-8</a
    ></li
  ><li
  ><strong
    ><a href="index.html#addons"
      >Addons</a
      ></strong
    ></li
  ><li
  ><a href="kcm_audio.html"
    >Audio addon</a
    ></li
  ><li
  ><a href="acodec.html"
    >Audio codecs</a
    ></li
  ><li
  ><a href="color.html"
    >Color addon</a
    ></li
  ><li
  ><a href="font.html"
    >Font addons</a
    ></li
  ><li
  ><a href="iio.html"
    >Image I/O addon</a
    ></li
  ><li
  ><a href="native_dialog.html"
    >Native dialogs addon</a
    ></li
  ><li
  ><a href="physfs.html"
    >PhysicsFS addon</a
    ></li
  ><li
  ><a href="primitives.html"
    >Primitives addon</a
    ></li
  ></ul
><!-- keep blank line for correct HTML -->
</div>

<div class="searchbox">
<script type="text/javascript">
function onSubmit(form) {
    for (i = 0; i < search_index.length; i++) {
        if (search_index[i] == form.q.value) {
            form.action = search_urls[i];
            form.method = "POST";
            return true;
        }
    }
    // Search-term is not in the index.
    // We could add an URL here which does a fulltext search - for
    // now we simply do nothing by return false to the form.
    return false;
}
</script>
<form id="search" action="search.py" onsubmit="return onSubmit(this);"><input type="text" name="q" id="q" size="15" autocomplete="off" /><br /> <input type="submit" value="Search" /><script type="text/javascript">actb = new actb("q", search_index);</script>
</form>
</div>


</td>
<td class="content">


<h1 class="title"
    >Getting started guide</h1
    ><div id="toc"
    ><ul
      ><li
	><a href="#introduction" id="TOC-introduction"
	  >Introduction</a
	  ></li
	><li
	><a href="#structure-of-the-library-and-its-addons" id="TOC-structure-of-the-library-and-its-addons"
	  >Structure of the library and its addons</a
	  ><ul
	  ><li
	    ><a href="#initialisation" id="TOC-initialisation"
	      >Initialisation</a
	      ></li
	    ><li
	    ><a href="#opening-a-window" id="TOC-opening-a-window"
	      >Opening a window</a
	      ></li
	    ><li
	    ><a href="#display-an-image" id="TOC-display-an-image"
	      >Display an image</a
	      ></li
	    ><li
	    ><a href="#changing-the-drawing-target" id="TOC-changing-the-drawing-target"
	      >Changing the drawing target</a
	      ></li
	    ><li
	    ><a href="#event-queues-and-input" id="TOC-event-queues-and-input"
	      >Event queues and input</a
	      ></li
	    ><li
	    ><a href="#displaying-some-text" id="TOC-displaying-some-text"
	      >Displaying some text</a
	      ></li
	    ><li
	    ><a href="#drawing-primitives" id="TOC-drawing-primitives"
	      >Drawing primitives</a
	      ></li
	    ><li
	    ><a href="#blending" id="TOC-blending"
	      >Blending</a
	      ></li
	    ><li
	    ><a href="#sound" id="TOC-sound"
	      >Sound</a
	      ></li
	    ><li
	    ><a href="#not-the-end" id="TOC-not-the-end"
	      >Not the end</a
	      ></li
	    ></ul
	  ></li
	></ul
      ></div
    ><h1 id="introduction"
    ><a href="#TOC-introduction"
      >Introduction</a
      ></h1
    ><p
    >Welcome to Allegro 4.9!</p
    ><p
    >Yes, the documentation is still very patchy. But if you're interested anyway, this short guide should point you at the parts of the API that you'll want to know about first. It's not a tutorial, as there isn't much discussion, only links into the manual. The rest you'll have to discover for yourself. Read the examples, and ask questions at <a href="http://www.allegro.cc/forums/"
      >Allegro.cc</a
      >.</p
    ><p
    >There is an unofficial tutorial at <a href="http://software.skoobalon.com/a5.php"
      ><code
	>http://software.skoobalon.com/a5.php</code
	></a
      >. Be aware that it is a little out of date, but the changes should be minor. Hopefully more will sprout when things stabilise, as they did for earlier versions of Allegro.</p
    ><h1 id="structure-of-the-library-and-its-addons"
    ><a href="#TOC-structure-of-the-library-and-its-addons"
      >Structure of the library and its addons</a
      ></h1
    ><p
    >Allegro 4.9 is divided into a core library and multiple addons. The addons are bundled together and built at the same time as the core, but they are distinct and kept in separate libraries. The core doesn't depend on anything in the addons, but addons may depend on the core and other addons and additional third party libraries.</p
    ><p
    >Here are the addons and their dependencies:</p
    ><pre
    ><code
      >a5_iio -&gt; allegro
a5_primitives -&gt; allegro
a5_color -&gt; allegro

a5_font -&gt; a5_iio -&gt; allegro
a5_ttf -&gt; a5_font -&gt; a5_iio -&gt; allegro

kcm_audio -&gt; allegro
a5_flac -&gt; kcm_audio -&gt; allegro
a5_vorbis -&gt; kcm_audio -&gt; allegro

a5_memfile -&gt; allegro
a5_physfs -&gt; allegro

a5_native_dialog -&gt; allegro
</code
      ></pre
    ><p
    >The header file for the core library is <code
      >allegro5/allegro.h</code
      >. The header files for the addons are named <code
      >allegro5/a5_iio.h</code
      >, <code
      >allegro5/a5_font.h</code
      >, etc.</p
    ><h2 id="initialisation"
    ><a href="#TOC-initialisation"
      >Initialisation</a
      ></h2
    ><p
    >Before using Allegro you must call <a href="system.html#al_init"
      >al_init</a
      >. Some addons have their own initialisation, e.g. <a href="iio.html#al_init_iio_addon"
      >al_init_iio_addon</a
      >, <a href="font.html#al_init_font_addon"
      >al_init_font_addon</a
      >, <a href="font.html#al_init_ttf_addon"
      >al_init_ttf_addon</a
      >.</p
    ><p
    >To receive input, you need to initialise some subsystems like <a href="keyboard.html#al_install_keyboard"
      >al_install_keyboard</a
      >, <a href="mouse.html#al_install_mouse"
      >al_install_mouse</a
      >, <a href="joystick.html#al_install_joystick"
      >al_install_joystick</a
      >.</p
    ><h2 id="opening-a-window"
    ><a href="#TOC-opening-a-window"
      >Opening a window</a
      ></h2
    ><p
    ><a href="display.html#al_create_display"
      >al_create_display</a
      > will open a window and return an <a href="display.html#allegro_display"
      >ALLEGRO_DISPLAY</a
      >.</p
    ><p
    >To clear the display, call <a href="graphics.html#al_clear_to_color"
      >al_clear_to_color</a
      >. Use <a href="graphics.html#al_map_rgba"
      >al_map_rgba</a
      > or <a href="graphics.html#al_map_rgba_f"
      >al_map_rgba_f</a
      > to obtain an <a href="graphics.html#allegro_color"
      >ALLEGRO_COLOR</a
      > parameter.</p
    ><p
    >Drawing operations are performed on a backbuffer. To make the operations visible, call <a href="display.html#al_flip_display"
      >al_flip_display</a
      >.</p
    ><h2 id="display-an-image"
    ><a href="#TOC-display-an-image"
      >Display an image</a
      ></h2
    ><p
    >To load an image from disk, you need to have initialised the image I/O addon with <a href="iio.html#al_init_iio_addon"
      >al_init_iio_addon</a
      >. Then use <a href="iio.html#al_load_bitmap"
      >al_load_bitmap</a
      >, which returns an <a href="graphics.html#allegro_bitmap"
      >ALLEGRO_BITMAP</a
      >.</p
    ><p
    >Use <a href="graphics.html#al_draw_bitmap"
      >al_draw_bitmap</a
      >, <a href="graphics.html#al_draw_scaled_bitmap"
      >al_draw_scaled_bitmap</a
      > or <a href="graphics.html#al_draw_rotated_scaled_bitmap"
      >al_draw_rotated_scaled_bitmap</a
      > to draw the image to the backbuffer. Remember to call <a href="display.html#al_flip_display"
      >al_flip_display</a
      >.</p
    ><h2 id="changing-the-drawing-target"
    ><a href="#TOC-changing-the-drawing-target"
      >Changing the drawing target</a
      ></h2
    ><p
    >Notice that <a href="graphics.html#al_clear_to_color"
      >al_clear_to_color</a
      > and <a href="graphics.html#al_draw_bitmap"
      >al_draw_bitmap</a
      > didn't take destination parameters: the destination is implicit. Allegro remembers the current &quot;target bitmap&quot; for the current thread. To change the target bitmap, call <a href="graphics.html#al_set_target_bitmap"
      >al_set_target_bitmap</a
      >.</p
    ><p
    >The backbuffer of the display is also a bitmap. You can get with <a href="display.html#al_get_backbuffer"
      >al_get_backbuffer</a
      > and then restore it as the target bitmap.</p
    ><p
    >Other bitmaps can be created with <a href="graphics.html#al_create_bitmap"
      >al_create_bitmap</a
      >, with options which can be adjusted with <a href="graphics.html#al_set_new_bitmap_flags"
      >al_set_new_bitmap_flags</a
      > and <a href="graphics.html#al_set_new_bitmap_format"
      >al_set_new_bitmap_format</a
      >.</p
    ><h2 id="event-queues-and-input"
    ><a href="#TOC-event-queues-and-input"
      >Event queues and input</a
      ></h2
    ><p
    >Input comes from multiple sources: keyboard, mouse, joystick, timers, etc. Event queues aggregate events from all these sources, then you can query the queue for events.</p
    ><p
    >Create an event queue with <a href="events.html#al_create_event_queue"
      >al_create_event_queue</a
      >, then tell input sources to place new events into that queue using <a href="events.html#al_register_event_source"
      >al_register_event_source</a
      >. The usual input event sources can be retrieved with <a href="keyboard.html#al_get_keyboard_event_source"
      >al_get_keyboard_event_source</a
      >, <a href="mouse.html#al_get_mouse_event_source"
      >al_get_mouse_event_source</a
      > and <a href="joystick.html#al_get_joystick"
      >al_get_joystick</a
      >.</p
    ><p
    >Events can be retrieved with <a href="events.html#al_wait_for_event"
      >al_wait_for_event</a
      > or <a href="events.html#al_get_next_event"
      >al_get_next_event</a
      >. Check the event type and other fields of <a href="events.html#allegro_event"
      >ALLEGRO_EVENT</a
      > to react to the input.</p
    ><p
    >Displays are also event sources, which emit events when they are resized. You'll need to set the ALLEGRO_RESIZABLE flag with <a href="display.html#al_set_new_display_flags"
      >al_set_new_display_flags</a
      > before creating the display, then register the display with an event queue. When you get a resize event, call <a href="display.html#al_acknowledge_resize"
      >al_acknowledge_resize</a
      >.</p
    ><p
    >Timers are event sources which &quot;tick&quot; periodically, causing an event to be inserted into the queues that the timer is registered with. Create some with <a href="timer.html#al_install_timer"
      >al_install_timer</a
      >.</p
    ><p
    ><a href="time.html#al_current_time"
      >al_current_time</a
      > and <a href="time.html#al_rest"
      >al_rest</a
      > are more direct ways to deal with time.</p
    ><h2 id="displaying-some-text"
    ><a href="#TOC-displaying-some-text"
      >Displaying some text</a
      ></h2
    ><p
    >To display some text, initialise the font addon with <a href="font.html#al_init_font_addon"
      >al_init_font_addon</a
      > then load a bitmap font with <a href="font.html#al_load_font"
      >al_load_font</a
      >. Use <a href="font.html#al_draw_text"
      >al_draw_text</a
      > or <a href="font.html#al_draw_textf"
      >al_draw_textf</a
      >.</p
    ><p
    >For TrueType fonts, you'll need to initialise the TTF font addon with <a href="font.html#al_init_ttf_addon"
      >al_init_ttf_addon</a
      > and load a TTF font with <a href="font.html#al_load_ttf_font"
      >al_load_ttf_font</a
      >.</p
    ><h2 id="drawing-primitives"
    ><a href="#TOC-drawing-primitives"
      >Drawing primitives</a
      ></h2
    ><p
    >The primitives addon provides some handy routines to draw lines (<a href="primitives.html#al_draw_line"
      >al_draw_line</a
      >), rectangles (<a href="primitives.html#al_draw_rectangle"
      >al_draw_rectangle</a
      >), circles (<a href="primitives.html#al_draw_circle"
      >al_draw_circle</a
      >), etc.</p
    ><h2 id="blending"
    ><a href="#TOC-blending"
      >Blending</a
      ></h2
    ><p
    >To draw translucent or tinted images or primitives, change the blender state with <a href="graphics.html#al_set_blender"
      >al_set_blender</a
      >.</p
    ><p
    >As with <a href="graphics.html#al_set_target_bitmap"
      >al_set_target_bitmap</a
      >, this changes Allegro's internal state (for the current thread). Often you'll want to save some part of the state and restore it later. The functions <a href="state.html#al_store_state"
      >al_store_state</a
      > and <a href="state.html#al_restore_state"
      >al_restore_state</a
      > provide a convenient way to do that.</p
    ><h2 id="sound"
    ><a href="#TOC-sound"
      >Sound</a
      ></h2
    ><p
    >Use <a href="kcm_audio.html#al_install_audio"
      >al_install_audio</a
      > to initialize sound. This will allow loading uncompressed .wav files, for other formats you need to initialize them first, for example with <a href="acodec.html#al_init_ogg_vorbis_addon"
      >al_init_ogg_vorbis_addon</a
      > for the .ogg format.</p
    ><p
    >After that, you can simply use <a href="kcm_audio.html#al_reserve_samples"
      >al_reserve_samples</a
      > and pass the number of sound effects typically playing at the same time. Then load your sound effects with <a href="kcm_audio.html#al_load_sample"
      >al_load_sample</a
      > and play them with <a href="kcm_audio.html#al_play_sample"
      >al_play_sample</a
      >. To stream large pieces of music from disk, you can use <a href="kcm_audio.html#al_stream_from_file"
      >al_stream_from_file</a
      > so the whole piece will not have to be pre-loaded into memory.</p
    ><p
    >If the above sounds too simple and you can't help but think about clipping and latency issues, don't worry. Allegro gives you full control over how much or little you want its sound system to do. The al_reserve_samples function mentioned above only sets up a default mixer and a number of sample instances but you don't need to use it.</p
    ><p
    >Instead, to get a &quot;direct connection&quot; to the sound system you would use an <a href="kcm_audio.html#allegro_voice"
      >ALLEGRO_VOICE</a
      > (but depending on the platform only one such voice is guaranteed to be available and it might require a specific format of audio data). Therefore all sound can be first routed through an <a href="kcm_audio.html#allegro_mixer"
      >ALLEGRO_MIXER</a
      > which is connected to such a voice (or another mixer) and will mix together all sample data fed to it.</p
    ><p
    >You can then directly stream real-time sample data to a mixer or a voice using an <a href="kcm_audio.html#allegro_stream"
      >ALLEGRO_STREAM</a
      > or play complete sounds using an <a href="kcm_audio.html#allegro_sample_instance"
      >ALLEGRO_SAMPLE_INSTANCE</a
      >. The latter simply points to an <a href="kcm_audio.html#allegro_sample"
      >ALLEGRO_SAMPLE</a
      > and will stream it for you.</p
    ><h2 id="not-the-end"
    ><a href="#TOC-not-the-end"
      >Not the end</a
      ></h2
    ><p
    >There's a heap of stuff we haven't even mentioned yet.</p
    ><p
    >Enjoy!</p
    ></td>
</tr>
</table>


<p>
Last updated: 2009-08-09 08:22:36 UTC
</p>
</body
  ></html
>

